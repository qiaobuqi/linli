<view class="container">
  <!-- 1. é¡¶éƒ¨ä½ç½®å’Œæœç´¢æ  -->
  <view class="top-bar">
    <view class="location-section">
      <text class="location-icon">ğŸ“</text>
      <text class="location-text">é˜³å…‰èŠ±å›­å°åŒº</text>
      <text class="location-arrow">â€º</text>
    </view>
    <view class="search-box" bindtap="onSearch">
      <text class="search-icon">ğŸ”</text>
      <text class="search-placeholder">æœç´¢å°åŒºæœåŠ¡...</text>
    </view>
  </view>

  <!-- 2. è½®æ’­Banner -->
  <view class="banner-section">
    <swiper class="banner-swiper" indicator-dots="{{true}}" autoplay="{{true}}" interval="{{5000}}" circular="{{true}}">
      <swiper-item wx:for="{{banners}}" wx:key="index">
        <view class="banner-item banner-{{item.type}}">
          <view class="banner-content">
            <text class="banner-title">{{item.title}}</text>
            <text class="banner-subtitle">{{item.subtitle}}</text>
          </view>
          <text class="banner-emoji">{{item.emoji}}</text>
        </view>
      </swiper-item>
    </swiper>
  </view>

  <!-- 3. æœåŠ¡åˆ†ç±»ç½‘æ ¼ -->
  <view class="category-section">
    <view class="category-grid">
      <view class="category-item" wx:for="{{categories}}" wx:key="type" bindtap="filterByCategory" data-type="{{item.type}}">
        <view class="category-icon category-{{item.type}}">
          <text class="icon-emoji">{{item.emoji}}</text>
        </view>
        <text class="category-name">{{item.name}}</text>
        <text class="category-count">{{item.count}}</text>
      </view>
    </view>
  </view>

  <!-- 4. çƒ­é—¨æ¨èæ ‡ç­¾ -->
  <view class="hot-tags-section">
    <view class="section-header">
      <text class="section-icon">ğŸ”¥</text>
      <text class="section-title">çƒ­é—¨æœåŠ¡</text>
    </view>
    <view class="tags-list">
      <view class="tag-item" wx:for="{{hotTags}}" wx:key="index" bindtap="filterByTag" data-tag="{{item}}">
        <text>#{{item}}</text>
      </view>
    </view>
  </view>

  <!-- 5. é™„è¿‘ä»»åŠ¡åˆ—è¡¨ -->
  <view class="tasks-section">
    <view class="section-header">
      <text class="section-icon">ğŸ“</text>
      <text class="section-title">é™„è¿‘éœ€æ±‚</text>
      <text class="section-more" bindtap="viewMore">æ›´å¤š â€º</text>
    </view>
    
    <block wx:if="{{loading}}">
      <view class="loading-container">
        <view class="loading-spinner"></view>
        <text class="loading-text">åŠ è½½ä¸­...</text>
      </view>
    </block>
    
    <block wx:else>
      <view class="task-list">
        <view class="task-card" wx:for="{{tasks}}" wx:key="id" bindtap="goToDetail" data-id="{{item.id}}">
          <!-- ä»»åŠ¡ç±»å‹æ ‡ç­¾ -->
          <view class="task-tag task-tag-{{item.type}}">
            <text class="tag-emoji">{{item.typeEmoji}}</text>
            <text class="tag-text">{{item.typeName}}</text>
          </view>
          
          <!-- ä»»åŠ¡ä¸»ä½“å†…å®¹ -->
          <view class="task-main">
            <view class="task-title-row">
              <text class="task-title">{{item.title}}</text>
              <view class="task-status" wx:if="{{item.urgency}}">
                <text class="urgent-badge">æ€¥</text>
              </view>
            </view>
            
            <text class="task-desc">{{item.description}}</text>
            
            <!-- å‘å¸ƒè€…ä¿¡æ¯ -->
            <view class="task-creator">
              <image class="creator-avatar" src="{{item.creator.avatar_url}}" mode="aspectFill"></image>
              <text class="creator-name">{{item.creator.nickname}}</text>
              <view class="creator-level">
                <text class="level-icon">â­</text>
                <text class="level-text">Lv.{{item.creator.level}}</text>
              </view>
            </view>
            
            <!-- åº•éƒ¨ä¿¡æ¯æ  -->
            <view class="task-footer">
              <view class="task-info">
                <text class="info-item">ğŸ“ {{item.distance || '500m'}}</text>
                <text class="info-separator">Â·</text>
                <text class="info-item">ğŸ‘ {{item.viewCount || 0}}æ¬¡æµè§ˆ</text>
              </view>
              <view class="task-price-box">
                <text class="price-symbol">Â¥</text>
                <text class="price-amount">{{item.price}}</text>
              </view>
            </view>
          </view>
        </view>
      </view>
      
      <!-- ç©ºçŠ¶æ€ -->
      <view class="empty-state" wx:if="{{tasks.length === 0}}">
        <text class="empty-icon">ğŸ“­</text>
        <text class="empty-text">é™„è¿‘æš‚æ— éœ€æ±‚</text>
        <text class="empty-hint">æˆä¸ºç¬¬ä¸€ä¸ªå‘å¸ƒéœ€æ±‚çš„äººå§ï¼</text>
      </view>
    </block>
  </view>
  
  <!-- æ‚¬æµ®å‘å¸ƒæŒ‰é’® -->
  <view class="floating-btn" bindtap="goToCreate">
    <text class="fab-icon">ï¼‹</text>
    <text class="fab-text">å‘å¸ƒ</text>
  </view>
</view>
